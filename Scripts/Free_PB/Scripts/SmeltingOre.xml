<?xml version="1.0" encoding="utf-8"?>
<Professionbuddy>
  <While Condition="SecondaryBot.Name != &quot;Grind Bot&quot;" IgnoreCanRun="True">
    <ChangeBotAction BotName="Grind Bot" />
  </While>
  <If Condition="Me.FreeNormalBagSlots &gt; 2" IgnoreCanRun="True">
    <!--Copper Bar-->
    <If Condition="InBankCount (2770) + InbagCount (2770)&gt; 0" IgnoreCanRun="True">
      <While Condition="InBankCount (2770) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="2770" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (2770) &gt; 0 " IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="2657" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>
    
    <!--Mining Check-->
    <If Condition="Mining.Level &gt;= 50 &amp;&amp; Mining.MaxLevel &lt; 150 &amp;&amp; Me.Level &gt;= 5" IgnoreCanRun="True">
      <CallSubRoutine SubRoutineName="Train Mining" />
    </If>

    <!--Tin Bar-->
    <If Condition="InBankCount (2771) + InbagCount (2771) &gt; 0 &amp;&amp; Mining.Level &gt;= 65" IgnoreCanRun="True">
      <While Condition="InBankCount (2771) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="2771" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (3304)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (2771) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="3304" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Bronze bar-->
    <If Condition="Blacksmithing.Level &gt;= 110 &amp;&amp; (InbagCount(2840) + InBankCount (2840) &gt; 0) &amp;&amp; (InbagCount(3576) + InBankCount (3576) &gt; 0) &amp;&amp; Mining.Level &gt; 65" IgnoreCanRun="True">
      <While Condition="InBankCount (2840) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="2840" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <While Condition="InBankCount (3576) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="3576" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (2659)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (2840) &gt; 0 &amp;&amp; InbagCount (3576) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="2659" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Silver Ore-->
    <If Condition="InbagCount (2775) + InBankCount (2775) &gt; 0 &amp;&amp; Mining.Level &gt; 75" IgnoreCanRun="True">
      <While Condition="InBankCount (2775) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="2775" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (2658)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (2775) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="2658" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Iron Ore-->
    <If Condition="InbagCount (2772) + InBankCount (2772) &gt; 0 &amp;&amp; Mining.Level &gt;= 100" IgnoreCanRun="True">
      <While Condition="InBankCount (2772) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="2772" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (3307)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (2772) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="3307" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Gold Ore-->
    <If Condition="InbagCount (2776) + InBankCount (2776) &gt; 0 &amp;&amp; Mining.Level &gt;= 115" IgnoreCanRun="True">
      <While Condition="InBankCount (2776) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="2776" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (3308)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (2776) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="3308" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Mithril Ore-->
    <If Condition="InbagCount (3858) + InBankCount (3858) &gt; 0 &amp;&amp; Mining.Level &gt;= 150" IgnoreCanRun="True">
      <While Condition="InBankCount (3858) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="3858" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (10097)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (3858) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="10097" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Truesilver Ore-->
    <If Condition="InbagCount(7911) + InBankCount(7911) &gt; 0 &amp;&amp; Mining.Level &gt;= 165" IgnoreCanRun="True">
      <While Condition="InBankCount (7911) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="7911" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (10098)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount(7911) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="10098" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

    <!--Thorium-->
    <If Condition="InbagCount (10620) + InBankCount (10620) &gt; 0 &amp;&amp; Mining.Level &gt;= 230" IgnoreCanRun="True">
      <While Condition="InBankCount (10620) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="10620" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (16153)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (10620) &gt; 0" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="16153" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>
 
    <!--Dark Iron-->
    <If Condition="InbagCount (11370) + InBankCount (11370) &gt; 7 &amp;&amp; Mining.Level &gt;= 230" IgnoreCanRun="True">
      <While Condition="InBankCount (11370) &gt; 0" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Move To Bank" />
        <GetItemfromBankAction Withdraw="All" Bank="Personal" MinFreeBagSlots="5" GetItemfromBankType="SpecificItem" ItemID="11370" NpcEntry="0" Amount="1" AutoFindBank="True" WithdrawAdditively="True" Location="0, 0, 0" />
      </While>
      <If Condition="!HasRecipe (14891)" IgnoreCanRun="True">
        <CallSubRoutine SubRoutineName="Train Mining" />
      </If>
      <CallSubRoutine SubRoutineName="Move To Forge" />
      <While Condition="InbagCount (11370) &gt; 7" IgnoreCanRun="True">
        <CastSpellAction RepeatType="Specific" Repeat="1" Entry="14891" CastOnItem="False" ItemType="Chest" ItemId="0" />
      </While>
    </If>

  </If>
  <LoadProfileAction ProfileType="Professionbuddy" Path="[PB]MB(Cava).xml" />
  <SubRoutine SubRoutineName="Move To Bank" >
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <If Condition="DistanceTo(-8310.676, 577.9235, 100.3048) &gt; 60" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="-8345.663, 621.6138, 96.07644" />
        <CustomAction Code="var9 = rnd.Next(700);" />
        <If Condition="(int)var9 &lt;= 100" IgnoreCanRun="True">
          <MoveToAction Location="-8324.74, 604.218, 99.68425" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank1.xml" />
        </If>
        <If Condition="(int)var9 &gt; 100 &amp;&amp; (int)var9 &lt;= 200" IgnoreCanRun="True">
          <MoveToAction Location="-8320.722, 600.137, 99.66592" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank2.xml" />
        </If>
        <If Condition="(int)var9 &gt; 200 &amp;&amp; (int)var9 &lt;= 300" IgnoreCanRun="True">
          <MoveToAction Location="-8316.812, 595.1612, 99.66646" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank3.xml" />
        </If>
        <If Condition="(int)var9 &gt; 300 &amp;&amp; (int)var9 &lt;= 400" IgnoreCanRun="True">
          <MoveToAction Location="-8326.801, 587.6045, 99.6609" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank4.xml" />
        </If>
        <If Condition="(int)var9 &gt; 400 &amp;&amp; (int)var9 &lt;= 500" IgnoreCanRun="True">
          <MoveToAction Location="-8330.598, 592.3568, 99.66071" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank5.xml" />
        </If>
        <If Condition="(int)var9 &gt; 500 &amp;&amp; (int)var9 &lt;= 600" IgnoreCanRun="True">
          <MoveToAction Location="-8334.195, 596.9282, 99.66006" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank6.xml" />
        </If>
        <If Condition="(int)var9 &gt; 600" IgnoreCanRun="True">
          <MoveToAction Location="-8310.676, 577.9235, 100.3048" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="SwBank7.xml" />
        </If>
      </If>
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <If Condition="DistanceTo(1870.537, -4684.5, 38.55014) &gt; 50" IgnoreCanRun="True">
        <FlyToAction Dismount="True" Location="1911.259, -4683.458, 35.38358" />
        <CustomAction Code="var9 = rnd.Next(400);" />
        <If Condition="(int)var9 &lt;= 100" IgnoreCanRun="True">
          <MoveToAction Location="1875.562, -4687.534, 38.50147" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="OrgBank1.xml" />
        </If>
        <If Condition="(int)var9 &gt; 100 &amp;&amp; (int)var9 &lt;= 200" IgnoreCanRun="True">
          <MoveToAction Location="1870.846, -4684.877, 38.53323" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="OrgBank2.xml" />
        </If>
        <If Condition="(int)var9 &gt; 200 &amp;&amp; (int)var9 &lt;= 300" IgnoreCanRun="True">
          <MoveToAction Location="1870.805, -4678.336, 38.55196" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="OrgBank3.xml" />
        </If>
        <If Condition="(int)var9 &gt; 300" IgnoreCanRun="True">
          <MoveToAction Location="1875.053, -4676.556, 38.50037" MoveType="Location" Pathing="Navigator" Entry="0" />
          <LoadProfileAction ProfileType="Honorbuddy" Path="OrgBank4.xml" />
        </If>
      </If>
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Move To Forge" >
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <FlyToAction Dismount="True" Location="-8420.148, 620.2996, 95.55436" />
      <LoadProfileAction ProfileType="Honorbuddy" Path="StormwindForge.xml" />
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <FlyToAction Dismount="True" Location="2055.761, -4827.665, 27.47184" />
      <!--<FlyToAction Dismount="True" Location="1907.269, -4212.248, 36.97852" />-->
      <LoadProfileAction ProfileType="Honorbuddy" Path="OrgrimmarForge.xml" />
    </If>
  </SubRoutine>
  <SubRoutine SubRoutineName="Train Mining">
    <If Condition="Me.IsAlliance" IgnoreCanRun="True">
      <FlyToAction Dismount="True" Location="-8420.033, 671.6198, 94.96619" />
      <MoveToAction Location="-8420.033, 671.6198, 94.96619" MoveType="Location" Pathing="Navigator" Entry="0" />
      <TrainSkillAction NpcEntry="5513" Location="-8433.48, 688.922, 96.31891" />
      <If Condition="InbagCount (2901) == 0 &amp;&amp; InbagCount (40772) == 0" IgnoreCanRun="True">
        <BuyItemAction NpcEntry="5512" Location="-8432.998, 623.7123, 95.39394" ItemID="2901" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
      </If>
    </If>
    <If Condition="Me.IsHorde" IgnoreCanRun="True">
      <FlyToAction Dismount="True" Location="2069.879, -4767.61, 27.47217" />
      <TrainSkillAction NpcEntry="3357" Location="2081.978, -4764.085, 27.92584" />
      <If Condition="InbagCount (2901) == 0 &amp;&amp; InbagCount (40772) == 0" IgnoreCanRun="True">
        <BuyItemAction NpcEntry="3356" Location="2075.79, -4828.07, 27.91959" ItemID="2901" BuyItemType="SpecificItem" Count="1" BuyAdditively="True" />
      </If>
    </If>
  </SubRoutine>
  <Declaration Code="Random rnd = new Random();" />
</Professionbuddy>
